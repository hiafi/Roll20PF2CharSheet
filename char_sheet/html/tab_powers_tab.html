<div class="sheet-tab-content sheet-tab-powers">
    {{ magic_header|safe }}

    <div class='sheet-3colrow'>


        {% for grouping in [["Cantrips", 1, 4, 7], ["Powers", 2, 5, 8, 10], ["Magic Items", 3, 6, 9]] %}
        <div class='sheet-col'>
            {% for level in grouping %}
                <h1 class="spell_section_title">{% if level != "Cantrips" and level != "Powers" and level != "Magic Items" %}Level {% endif %}{{level}}</h1>
                {% if level != "Cantrips" and level != "Powers" and level != "Magic Items" %}
                <div>
                    <table>
                        <tr class="table_header_details">
                            <td>Slots Available</td>
                            <td>Max Slots</td>
                        </tr>
                        <tr>
                            <td><input class="skinny_number" type="number" name="attr_spell{{level}}_current" value="0" /></td>
                            <td><input class="skinny_number" type="number" name="attr_spell{{level}}_maximum" value="0" /></td>
                        </tr>
                    </table>
                </div>
                {% endif %}
                <fieldset class="repeating_spells{{level}}">
                    <div>
                        <table class="ability_table">
                            <tr class="table_header_details"><td>Prep</td></tr>
                            <tr>
                                <td><input type="checkbox" name="attr_spellprep" /></td>
                                <td><input class="ability_name" type="text" name="attr_spellname" /></td>
                                <td>{% raw %}
                                    <button type="roll" value="&{template:spell} {{character=@{character_name}}} {{name=@{spellname}}} {{text=@{spelltext}}} {{verbal=[[@{spellverbal}]]}} {{somatic=[[@{spellsomatic}]]}} {{material=[[@{spellmaterial}]]}} {{reaction=[[@{spellreaction}]]}} {{range=@{spellrange}}} {{area=@{spellarea}}} {{duration=@{spellduration}}} {{critsuccess=@{spellcritsuccess}}} {{success=@{spellsuccess}}} {{fail=@{spellfail}}} {{critfail=@{spellcritfail}}} {{heightened=@{spellheighten}}}" >

                                    </button>
                                {% endraw %}</td>
                            </tr>
                        </table>
                        <input type="checkbox" class="sheet-block-switch config_checkbox spell_config_checkbox"> <span class="config_checkbox_icon spell_config_checkbox">y</span>
                        <div class="sheet-block-b">
                            <div>
                                <table>
                                    <tr class="table_header_details">
                                        <td>Verbal</td>
                                        <td>Somatic</td>
                                        <td>Material</td>
                                        <td>Reaction</td>
                                    </tr>
                                    <tr>
                                        <td><input type="checkbox" name="attr_spellverbal" value="1" /></td>
                                        <td><input type="checkbox" name="attr_spellsomatic" value="1" /></td>
                                        <td><input type="checkbox" name="attr_spellmaterial" value="1" /></td>
                                        <td><input type="checkbox" name="attr_spellreaction" value="1" /></td>
                                    </tr>
                                </table>
                            </div>
                            <div>
                                <table>
                                    <tr class="table_header_details"><td>Cost</td></tr>
                                    <tr><td><input type="text" name="attr_spellcost" /></td></tr>
                                </table>
                                <table>
                                    <tr class="table_header_details"><td>Range</td></tr>
                                    <tr><td><input type="text" name="attr_spellrange" /></td></tr>
                                </table>
                                <table>
                                    <tr class="table_header_details"><td>Area</td></tr>
                                    <tr><td><input type="text" name="attr_spellarea" /></td></tr>
                                </table>
                                <table>
                                    <tr class="table_header_details"><td>Targets</td></tr>
                                    <tr><td><input type="text" name="attr_spelltargets" /></td></tr>
                                </table>
                                <table>
                                    <tr class="table_header_details"><td>Casting</td></tr>
                                    <tr><td><input type="text" name="attr_spellcasttime" /></td></tr>
                                </table>
                                <table>
                                    <tr class="table_header_details"><td>Duration</td></tr>
                                    <tr><td><input type="text" name="attr_spellduration" /></td></tr>
                                </table>
                            </div>
                            <textarea name="attr_spelltext"></textarea>
                            <div>
                                <div>Critical Success:</div>
                                <input type="text" name="attr_spellcritsuccess" />
                            </div>
                            <div>
                                <div>Success:</div>
                                <input type="text" name="attr_spellsuccess" />
                            </div>
                            <div>
                                <div>Failure:</div>
                                <input type="text" name="attr_spellfail" />
                            </div>
                            <div>
                                <div>Critical Failure:</div>
                                <input type="text" name="attr_spellcritfail" />
                            </div>
                            <div>
                                <div>Heightened Effects:</div>
                                <textarea name="attr_spellheighten"></textarea>
                            </div>
                        </div>
                    </div>

                </fieldset>
                <hr />
            {% endfor %}
        </div>
        {% endfor %}
    </div>
</div>